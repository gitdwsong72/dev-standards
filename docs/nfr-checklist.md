# NFR (Non-Functional Requirements) 체크리스트

기능 개발 시 비기능 요구사항을 체계적으로 검토하기 위한 체크리스트입니다.
PRD 작성, 코드 리뷰, 배포 전 점검 시 활용합니다.

---

## 1. 성능 (Performance)

API 응답 시간, 페이지 로딩, 데이터 처리 속도 관련 항목입니다.

- [ ] API 응답 시간 목표 정의 (예: 목록 조회 < 200ms, 상세 조회 < 100ms)
- [ ] 대용량 데이터 페이지네이션 적용 (기본 page_size 20, 최대 100)
- [ ] N+1 쿼리 방지 (JOIN 또는 batch 조회 사용)
- [ ] 불필요한 컬럼 SELECT 지양 (`SELECT *` 금지, 필요한 컬럼만 조회)
- [ ] 적절한 DB 인덱스 설계 (WHERE, ORDER BY, JOIN 컬럼)
- [ ] 대량 데이터 INSERT/UPDATE 시 batch 처리 적용
- [ ] Frontend 번들 사이즈 확인 (lazy loading, code splitting 적용)
- [ ] 이미지/정적 리소스 최적화 (압축, CDN 활용)

---

## 2. 보안 (Security)

인증, 권한, 데이터 보호 관련 항목입니다.

- [ ] 인증 토큰 검증 (JWT 유효성, 만료 시간 확인)
- [ ] API 엔드포인트별 권한 확인 (RBAC 또는 ABAC 적용)
- [ ] SQL Injection 방지 (파라미터 바인딩 사용, 동적 SQL 지양)
- [ ] XSS 방지 (사용자 입력 이스케이프, `dangerouslySetInnerHTML` 지양)
- [ ] CSRF 방지 (SameSite 쿠키, CSRF 토큰 적용)
- [ ] 민감 데이터 로깅 금지 (비밀번호, 토큰, 개인정보 마스킹)
- [ ] 환경 변수로 비밀 값 관리 (하드코딩 금지)
- [ ] CORS 설정 최소화 (허용 origin 명시적 지정)
- [ ] Rate Limiting 적용 (API 호출 빈도 제한)
- [ ] 파일 업로드 시 검증 (파일 타입, 크기 제한, 저장 경로 검증)

---

## 3. 안정성 (Reliability)

에러 처리, 장애 대응, 데이터 정합성 관련 항목입니다.

- [ ] 예외 처리 표준화 (일관된 에러 응답 포맷 사용)
- [ ] 예상 가능한 에러 케이스 모두 처리 (400, 404, 409, 500 등)
- [ ] DB 트랜잭션 적절히 적용 (Service 레벨에서 관리)
- [ ] 외부 API 호출 시 timeout 설정 (기본 30초 이내)
- [ ] 외부 API 호출 시 retry 로직 (exponential backoff)
- [ ] 동시성 제어 (optimistic locking 또는 pessimistic locking)
- [ ] 데이터 정합성 검증 (외래 키 무결성, 상태 전환 규칙)
- [ ] Graceful shutdown 지원 (진행 중인 요청 완료 후 종료)

---

## 4. 확장성 (Scalability)

수평/수직 확장, 리소스 사용 관련 항목입니다.

- [ ] Stateless 설계 (서버 메모리에 세션 저장 지양)
- [ ] DB 커넥션 풀 설정 (min/max 적절히 설정)
- [ ] 대용량 파일 처리 시 스트리밍 사용 (메모리 전체 로드 지양)
- [ ] 캐시 전략 수립 (Redis, 인메모리 캐시 적용 검토)
- [ ] Primary/Replica DB 분리 (읽기 전용 쿼리는 Replica 사용)
- [ ] 비동기 처리 적용 (장시간 작업은 백그라운드 태스크로)
- [ ] API 버전 관리 (`/api/v1/`, `/api/v2/`)

---

## 5. 유지보수성 (Maintainability)

코드 품질, 문서화, 테스트 관련 항목입니다.

- [ ] 레이어 패턴 준수 (Router → Service → Repository)
- [ ] 도메인별 디렉토리 구조 유지
- [ ] SQL 파일 분리 (인라인 SQL 지양, `.sql` 파일 관리)
- [ ] 타입 안전성 확보 (TypeScript strict mode, Pydantic 모델 사용)
- [ ] 매직 넘버/문자열 상수화
- [ ] 단위 테스트 작성 (핵심 비즈니스 로직 커버리지 80% 이상)
- [ ] 통합/API 테스트 작성 (주요 CRUD 엔드포인트)
- [ ] 코드 리뷰 완료 (`@code-quality-reviewer` 활용)
- [ ] lint/format 검사 통과 (ESLint, Prettier, Ruff)

---

## 6. 사용성 (Usability)

사용자 경험, UI/UX 관련 항목입니다.

- [ ] 로딩 상태 표시 (Skeleton UI 또는 Spinner)
- [ ] 에러 상태 UI 제공 (사용자 친화적 에러 메시지)
- [ ] Empty State 처리 (데이터 없을 때 안내 메시지)
- [ ] 폼 유효성 검증 (실시간 + 제출 시 검증)
- [ ] 키보드 접근성 (Tab 이동, Enter 제출)
- [ ] 반응형 레이아웃 (모바일/태블릿 대응, 필요시)
- [ ] 확인/삭제 작업 시 확인 다이얼로그

---

## 7. 관측성 (Observability)

로깅, 모니터링, 추적 관련 항목입니다.

- [ ] 구조화된 로깅 적용 (JSON 형태, 요청 ID 포함)
- [ ] 요청/응답 로그 기록 (성공, 실패 모두)
- [ ] 에러 로그에 스택 트레이스 포함
- [ ] 민감 정보 로그에서 마스킹 처리
- [ ] Health Check 엔드포인트 (`/health`)
- [ ] 주요 메트릭 수집 가능 (응답 시간, 에러율, 처리량)

---

## 8. 배포/운영 (Deployment & Operations)

빌드, 배포, 환경 설정 관련 항목입니다.

- [ ] 환경별 설정 분리 (development, staging, production)
- [ ] 환경 변수 `.env.example` 제공
- [ ] Docker 이미지 빌드 정상 동작
- [ ] docker-compose로 로컬 개발 환경 구동 가능
- [ ] DB 마이그레이션 스크립트 작성 (스키마 변경 시)
- [ ] 롤백 계획 수립 (배포 실패 시 이전 버전 복구)
- [ ] 무중단 배포 고려 (rolling update 또는 blue-green)

---

## 체크리스트 활용 가이드

### PRD 작성 시

PRD의 NFR 섹션에 해당 기능에 적용할 항목을 선별하여 포함합니다.
모든 항목이 매번 필요한 것은 아니며, 기능 특성에 맞게 선택합니다.

### 코드 리뷰 시

`@code-quality-reviewer`가 이 체크리스트를 기반으로 리뷰합니다.
특히 **보안**, **성능**, **안정성** 영역은 필수로 확인합니다.

### 배포 전 점검 시

QA/배포 전에 해당 기능의 NFR 항목을 최종 점검합니다.

| 우선순위 | 영역 | 항목 수 |
|----------|------|---------|
| 필수 | 보안, 안정성 | 18 |
| 권장 | 성능, 유지보수성 | 17 |
| 선택 | 확장성, 사용성, 관측성, 배포/운영 | 20 |
| **합계** | | **55** |
